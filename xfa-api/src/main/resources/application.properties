# Configuracoes do servidor
%dev.quarkus.http.port=8081
%prod.quarkus.http.port=8085
quarkus.http.host=0.0.0.0

# Configuracoes do OpenAPI/Swagger
quarkus.smallrye-openapi.path=/swagger
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# ================================
# Configuracoes de CORS
# ================================
quarkus.http.cors.enabled=true
quarkus.http.cors.methods=GET,PUT,POST,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Desenvolvimento: libera tudo
%dev.quarkus.http.cors.origins=*

# Producao: libera apenas o frontend real
%prod.quarkus.http.cors.origins=https://xfinder-archery.com.br

#Testando o acesso com o CORS ativo
#curl -i -X OPTIONS http://localhost:8081/api/products -H "Origin: http://localhost:8080"   -H "Access-Control-Request-Method: GET"



# Configuracoes de log
quarkus.log.console.enable=true
quarkus.log.console.level=INFO
quarkus.log.category."com.xfinder.api.produtos".level=DEBUG
quarkus.log.category."com.xfinder.superfrete".level=DEBUG
quarkus.log.category."com.xfinder.api.auth".level=DEBUG

# Banner customizado
quarkus.banner.enabled=true

# Configuracoes da API Superfrete
%dev.superfrete.api.token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTk0MDMyNjYsInN1YiI6IktsQnlIY0ZhRWJSZWE5anJyS1lxM25KQWV4SjMifQ.x4pHsm3Z6-kP4TLcej8p2pC_OxW50cKDfDtl006cRmg
%prod.superfrete.api.token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTc4NjQyNjQsInN1YiI6IklQNkhyUURzQXJVUjJVY29vOUpRZFdYU1B0NjMifQ.1Ej63bA6fKx7yMJLZbD9s4EO6n4dMCTsalryi8h3QOU

%dev.superfrete.store.postal-code=03167030
%prod.superfrete.store.postal-code=03167030
%dev.superfrete.store.email=contato.xfinder@gmail.com.br
%prod.superfrete.store.email=contato.xfinder@gmail.com.br

# Configuracao do Rest Client
%dev.quarkus.rest-client."superfrete-api".url=https://sandbox.superfrete.com
%prod.quarkus.rest-client."superfrete-api".url=https://api.superfrete.com
quarkus.rest-client."superfrete-api".scope=jakarta.inject.Singleton

# Configuracao do Mailer para Gmail
# Usando porta 465 com SSL direto (mais confiavel que STARTTLS na porta 587)
quarkus.mailer.from=contato.xfinder@gmail.com
quarkus.mailer.host=smtp.gmail.com
quarkus.mailer.port=465
quarkus.mailer.ssl=true
quarkus.mailer.start-tls=DISABLED
quarkus.mailer.username=contato.xfinder@gmail.com
quarkus.mailer.password=bpir kvyk osew qxkz
quarkus.mailer.auth-methods=PLAIN LOGIN
quarkus.mailer.mock=false
# Trust all certificates (apenas para desenvolvimento - em produção usar certificados validos)
quarkus.mailer.trust-all=true

#quarkus.mailer.username=fctassinari@gmail.com
#quarkus.mailer.password=xkkk crlq ifnb pbpj


# Database configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=postgres
quarkus.datasource.password=XFA@2025
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/xfa
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://xfinder-postgres:5432/xfa


# Hibernate configuration
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true

# ================================
# Configuracoes do Keycloak / OIDC
# ================================
# URL do servidor de autenticacao Keycloak
%dev.quarkus.oidc.auth-server-url=https://localhost:8443/realms/xfinder
%prod.quarkus.oidc.auth-server-url=https://xfinder-archery.com.br/realms/xfinder

# Client ID configurado no Keycloak
quarkus.oidc.client-id=xfinder-web

# Para client publico, nao eh necessario secret
# quarkus.oidc.credentials.secret=your-secret-here

# Nota: A verificacao de token eh feita automaticamente pelo Quarkus OIDC
# Nao eh necessario configurar explicitamente

# Permitir acesso anonimo a alguns endpoints (sera controlado por @RolesAllowed)
quarkus.oidc.tenant-enabled=true

# Configuracao de roles
# IMPORTANTE: Baseado no projeto angular-quarkus que funciona
# O mapper no Keycloak deve adicionar roles no claim 'roles' (nao aninhado)
# Se usar realm_access.roles, o Quarkus pode nao extrair corretamente
quarkus.oidc.roles.role-claim-path=roles
# Fonte das roles: accesstoken (do token JWT)
quarkus.oidc.roles.source=accesstoken
# Habilitar logs de debug para troubleshooting
quarkus.log.category."io.quarkus.oidc".level=DEBUG
quarkus.log.category."io.quarkus.security".level=DEBUG

# Tempo de expiracao do token (em segundos)
quarkus.oidc.token.lifespan-grace=60

# ================================
# Configuracoes SSL para Desenvolvimento
# ================================
# Desabilitar validacao de certificados SSL em desenvolvimento (apenas para certificados auto-assinados)
# ATENCAO: NAO use isso em producao! Use apenas em desenvolvimento local!
# Isso permite que o Quarkus se conecte ao Keycloak com certificado auto-assinado
%dev.quarkus.tls.trust-all=true
# Configurar OIDC para nao verificar certificados SSL em desenvolvimento
%dev.quarkus.oidc.tls.verification=none
# Configurar OIDC Client para nao verificar certificados SSL
%dev.quarkus.oidc-client.tls.verification=none
# Configurar Rest Client para nao verificar certificados SSL (se necessario)
%dev.quarkus.rest-client."superfrete-api".trust-all=true

# ================================
# Configuracoes do Frontend
# ================================
# Keycloak
%dev.frontend.keycloak.url=https://localhost:8443
%prod.frontend.keycloak.url=https://xfinder-archery.com.br
frontend.keycloak.realm=xfinder
frontend.keycloak.client-id=xfinder-web

# API URLs
%dev.frontend.api.base-url=http://localhost:8081
%prod.frontend.api.base-url=https://xfinder-archery.com.br
%dev.frontend.api.products-url=http://localhost:8081/api/products
%prod.frontend.api.products-url=https://xfinder-archery.com.br/api/products
%dev.frontend.api.customers-url=http://localhost:8081/api/customers
%prod.frontend.api.customers-url=https://xfinder-archery.com.br/api/customers
%dev.frontend.api.orders-url=http://localhost:8081/api/orders
%prod.frontend.api.orders-url=https://xfinder-archery.com.br/api/orders
%dev.frontend.api.mail-url=http://localhost:8081/api/mail
%prod.frontend.api.mail-url=https://xfinder-archery.com.br/api/mail
%dev.frontend.api.superfrete-url=http://localhost:8081/api/superfrete/calculate-freight
%prod.frontend.api.superfrete-url=https://xfinder-archery.com.br/api/superfrete/calculate-freight

# App URLs
%dev.frontend.app.base-url=http://localhost:8080
%prod.frontend.app.base-url=https://xfinder-archery.com.br
%dev.frontend.app.image-url=http://localhost:8080
%prod.frontend.app.image-url=https://xfinder-archery.com.br

# Payment
frontend.payment.checkout-base-url=https://checkout.infinitepay.io/fctassinari

# Store Info
frontend.store.postal-code=03167030
frontend.store.email=contato.xfinder@gmail.com.br
frontend.store.name=Fabio Tassinari
frontend.store.phone=11991318744
frontend.store.address=Rua dos Capitaes Mores
frontend.store.number=346
frontend.store.complement=Apto 101B
frontend.store.district=Mooca
frontend.store.city=Sao Paulo
frontend.store.state=SP

# Features
%dev.frontend.features.use-mock-checkout=true
%prod.frontend.features.use-mock-checkout=false

# Google Maps API Key
%dev.frontend.google-maps.api-key=
%prod.frontend.google-maps.api-key=AIzaSyCqAInDVGGJeFAMPcc8UbwSvXuD2RlV24A